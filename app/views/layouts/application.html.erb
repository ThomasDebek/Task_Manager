<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <title><%= content_for(:title) || "Task Manager" %></title>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">

  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>

  <%= yield :head %>

  <link rel="icon" href="/icon.png" type="image/png">
  <link rel="icon" href="/icon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/icon.png">

  <%= stylesheet_link_tag "tailwind", "data-turbo-track": "reload" %>
  <%= javascript_importmap_tags %>
</head>

<body class="min-h-screen bg-slate-100 text-slate-900 dark:bg-slate-900 dark:text-slate-100 antialiased transition-colors">
<!-- TOP BAR -->
<header class="fixed inset-x-0 top-0 z-50 border-b border-slate-200 bg-white/80 backdrop-blur dark:border-slate-800 dark:bg-slate-900/80">
  <div class="container mx-auto flex max-w-7xl items-center justify-between px-6 py-4">
        <span class="text-sm font-semibold tracking-wide">
          Task Manager
        </span>

    <!-- THEME TOGGLE -->
    <button
      id="theme-toggle"
      type="button"
      class="rounded-lg border border-slate-300 p-2 text-slate-700 hover:bg-slate-100
                 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-800">
      ğŸŒ™
    </button>
  </div>
</header>

<!-- PAGE CONTENT -->
<main class="container mx-auto max-w-7xl px-6 pt-28 pb-16">
  <%= yield %>
</main>

<!-- TOGGLE SCRIPT -->
<script>
    const root = document.documentElement
    const toggle = document.getElementById("theme-toggle")

    toggle.addEventListener("click", () => {
        root.classList.toggle("dark")
        toggle.textContent = root.classList.contains("dark") ? "ğŸŒ™" : "â˜€ï¸"
    })
</script>
</body>
</html>